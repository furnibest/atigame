(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{975:()=>{},2860:(e,a,i)=>{Promise.resolve().then(i.bind(i,9589))},4879:(e,a,i)=>{"use strict";i.d(a,{A:()=>o});var n=i(5155),r=i(2115),s=i(6874),t=i.n(s),d=i(5695),l=i(7489),c=i(3578);function o(e){let{children:a}=e,[i,s]=(0,r.useState)(!1),o=(0,d.useRouter)(),m=(0,d.usePathname)(),u=()=>{localStorage.removeItem("adminLoggedIn"),o.push("/admin")},h=[{href:"/admin/dashboard",icon:c.xiI,label:"Dashboard"},{href:"/admin/products",icon:c.LJS,label:"Produk"},{href:"/",icon:c.v02,label:"Kembali ke Website"}];return(0,n.jsxs)("div",{className:"admin-layout",children:[(0,n.jsxs)("div",{className:"admin-mobile-header",children:[(0,n.jsx)("button",{className:"admin-mobile-toggle",onClick:()=>s(!i),children:(0,n.jsx)(l.g,{icon:i?c.GRI:c.ckx})}),(0,n.jsx)("h1",{children:"Admin Panel"}),(0,n.jsx)("button",{className:"admin-logout-mobile",onClick:u,children:(0,n.jsx)(l.g,{icon:c.GxD})})]}),(0,n.jsxs)("div",{className:"admin-sidebar ".concat(i?"open":""),children:[(0,n.jsxs)("div",{className:"admin-sidebar-header",children:[(0,n.jsx)("h2",{children:"Atiga Meubel"}),(0,n.jsx)("p",{children:"Admin Panel"})]}),(0,n.jsx)("nav",{className:"admin-sidebar-nav",children:h.map(e=>(0,n.jsxs)(t(),{href:e.href,className:"admin-nav-item ".concat(m===e.href?"active":""),onClick:()=>s(!1),children:[(0,n.jsx)(l.g,{icon:e.icon}),(0,n.jsx)("span",{children:e.label})]},e.href))}),(0,n.jsx)("div",{className:"admin-sidebar-footer",children:(0,n.jsxs)("button",{className:"admin-logout-btn",onClick:u,children:[(0,n.jsx)(l.g,{icon:c.GxD}),(0,n.jsx)("span",{children:"Logout"})]})})]}),i&&(0,n.jsx)("div",{className:"admin-sidebar-overlay",onClick:()=>s(!1)}),(0,n.jsx)("div",{className:"admin-main",children:(0,n.jsx)("div",{className:"admin-content",children:a})})]})}i(975)},9589:(e,a,i)=>{"use strict";i.r(a),i.d(a,{default:()=>l});var n=i(5155),r=i(2115),s=i(5695),t=i(4879);let d="/api/products";function l(){let e=(0,s.useRouter)(),[a,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)([]),[o,m]=(0,r.useState)({name:"",description:"",price:"",image:null,category:"Semua Produk",featured:!1}),[u,h]=(0,r.useState)(null),[p,x]=(0,r.useState)(null),[g,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!localStorage.getItem("adminLoggedIn"))return void e.push("/admin");i(!0),f()},[e]);let f=async()=>{try{let e=await fetch(d),a=await e.json();Array.isArray(a)?c(a):c([])}catch(e){c([])}},b=e=>{let a=e.target;if("image"===a.name&&a.files){let e=a.files[0];m({...o,image:e}),e&&x(URL.createObjectURL(e))}else"featured"===a.name?m({...o,featured:a.checked}):m({...o,[a.name]:a.value})},v=async e=>{e.preventDefault(),j(!0);let a=new FormData;a.append("name",o.name),a.append("description",o.description),a.append("price",o.price),a.append("category",o.category),a.append("featured",o.featured?"1":"0"),o.image&&a.append("image",o.image),(u?await fetch("".concat(d,"/").concat(u),{method:"PUT",body:a}):await fetch(d,{method:"POST",body:a})).ok?(m({name:"",description:"",price:"",image:null,category:"Semua Produk",featured:!1}),x(null),h(null),f()):alert("Gagal menyimpan produk!"),j(!1)},y=async e=>{window.confirm("Hapus produk ini?")&&(j(!0),await fetch("".concat(d,"/").concat(e),{method:"DELETE"}),f(),j(!1))};return a?(0,n.jsx)(t.A,{children:(0,n.jsxs)("div",{className:"admin-products",children:[(0,n.jsx)("h2",{style:{color:"#bfa16a",marginBottom:"1.5rem"},children:"Manajemen Produk"}),(0,n.jsxs)("form",{className:"product-form",onSubmit:v,children:[(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsx)("input",{name:"name",placeholder:"Nama produk",value:o.name,onChange:b,required:!0}),(0,n.jsx)("input",{name:"price",placeholder:"Harga",type:"number",value:o.price,onChange:b,required:!0})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsx)("select",{name:"category",value:o.category,onChange:b,required:!0,style:{flex:1,padding:"0.7rem 1rem",borderRadius:6,border:"1px solid #ccc",fontSize:"1rem"},children:["Semua Produk","Meja","Kursi","Lemari","Buffet","Sofa"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))}),(0,n.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginLeft:"1rem"},children:[(0,n.jsx)("input",{type:"checkbox",name:"featured",checked:o.featured,onChange:b}),"Produk Unggulan"]})]}),(0,n.jsx)("textarea",{name:"description",placeholder:"Deskripsi",value:o.description,onChange:b,required:!0}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsx)("input",{name:"image",type:"file",accept:"image/*",onChange:b}),p&&(0,n.jsx)("img",{src:p,alt:"preview",className:"img-preview"})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("button",{type:"submit",disabled:g,children:[u?"Update":"Tambah"," Produk"]}),u&&(0,n.jsx)("button",{type:"button",className:"cancel-btn",onClick:()=>{m({name:"",description:"",price:"",image:null,category:"Semua Produk",featured:!1}),h(null),x(null)},children:"Batal"})]})]}),(0,n.jsx)("hr",{style:{margin:"2rem 0",borderColor:"#ececec"}}),(0,n.jsx)("div",{className:"product-table-wrap",children:(0,n.jsxs)("table",{className:"product-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Gambar"}),(0,n.jsx)("th",{children:"Nama"}),(0,n.jsx)("th",{children:"Harga"}),(0,n.jsx)("th",{children:"Kategori"}),(0,n.jsx)("th",{children:"Deskripsi"}),(0,n.jsx)("th",{children:"Aksi"})]})}),(0,n.jsx)("tbody",{children:Array.isArray(l)&&l.length>0?l.map(e=>{var a;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.image?(0,n.jsx)("img",{src:e.image,alt:"img",className:"img-thumb"}):(0,n.jsx)("div",{style:{width:60,height:60,background:"#f0f0f0",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:6},children:"No Image"})}),(0,n.jsxs)("td",{children:[(0,n.jsx)("div",{children:e.name}),e.featured&&(0,n.jsx)("span",{style:{background:"#bfa16a",color:"white",padding:"0.2rem 0.4rem",borderRadius:"4px",fontSize:"0.7rem",fontWeight:"bold",marginTop:"0.3rem",display:"inline-block"},children:"UNGGULAN"})]}),(0,n.jsxs)("td",{children:["Rp ",null==(a=e.price)?void 0:a.toLocaleString("id-ID")]}),(0,n.jsx)("td",{children:e.category}),(0,n.jsx)("td",{style:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.description}),(0,n.jsxs)("td",{children:[(0,n.jsx)("button",{className:"edit-btn",onClick:()=>{m({name:e.name,description:e.description,price:e.price.toString(),image:null,category:e.category||"Semua Produk",featured:!!e.featured}),h(e.id),x(e.image||null)},children:"Edit"}),(0,n.jsx)("button",{className:"delete-btn",onClick:()=>y(e.id),children:"Hapus"})]})]},e.id)}):(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,style:{textAlign:"center",color:"#aaa"},children:"Tidak ada produk"})})})]})})]})}):(0,n.jsx)("div",{children:"Loading..."})}}},e=>{e.O(0,[902,266,796,441,964,358],()=>e(e.s=2860)),_N_E=e.O()}]);